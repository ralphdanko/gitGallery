var url="http://www.splashbase.co/api/v1/images/search?query=tree",request=new XMLHttpRequest;request.open("GET",url,!0),request.onload=function(){var e=JSON.parse(this.response);let t,s=document.getElementById("gallery"),n=document.getElementById("gallery__button");function l(l){n.disabled=!0,n.innerHTML='<div class="loader__container"><i class="fas fa-spinner fa-spin"></i></div>';var i=l;let r=i+10;for(r>e.images.length&&(r=e.images.length),i=l;i<r;i++)if(i<e.images.length){let t=document.createElement("DIV");4==i&&t.classList.add("colspan1st"),8==i&&t.classList.add("colspan2nd");let n=document.createElement("IMG");t.classList.add("hidden"),t.addEventListener("click",f),t.addEventListener("mouseover",d),t.addEventListener("mouseout",c),n.addEventListener("load",u,!1),n.setAttribute("src",e.images[i].url),n.setAttribute("data-src",e.images[i].large_url),n.setAttribute("data-site",e.images[i].site);let l=document.createElement("SPAN");l.innerHTML="#"+e.images[i].site,s.appendChild(t),t.appendChild(n),t.appendChild(l),i<10&&t.classList.add("flex")}let o=0;function u(){let d=(t=s.getElementsByTagName("div")).length-l;if(++o===d){document.getElementById("gallery__loader")&&document.getElementById("gallery__loader").remove();let l=document.getElementsByClassName("flex");a(l),n.innerHTML="Show More",s.style.display="grid",[].forEach.call(t,function(e){n.style.display="block",n.disabled=!1,e.classList.remove("hidden")}),i>e.images.length-1&&n.remove()}}return i}z=l(0);var i=10;n.onclick=function(){i=l(i)};var a=function(e){function s(t,s){for(let n=t;n<e.length;n+=10)e[n].classList.add(s)}[].forEach.call(t,function(e){e.classList.remove("colspan1st","colspan2nd","colspan3rd","colspan4th")}),s(4,"colspan1st"),s(8,"colspan2nd"),s(7,"colspan3rd"),s(9,"colspan4th")};function d(e){e.currentTarget.querySelector("span").style.visibility="visible"}function c(e){e.currentTarget.querySelector("span").style.visibility="hidden"}let r=document.getElementById("lightbox"),o=r.querySelector("img"),u=document.getElementById("lightbox__close"),m=0;function g(){1===++m&&(o.style.display="block",u.innerHTML='<i class="fas fa-times"></i>'),m=0}function f(e){r.classList.add("opened"),r.addEventListener("click",y);let t=e.currentTarget.querySelector("img").dataset.src,s=e.currentTarget.querySelector("img").src;"null"==t?o.setAttribute("src",s):o.setAttribute("src",t),r.addEventListener("click",y),o.addEventListener("load",g,!1)}function y(){r.classList.remove("opened"),o.style.display="none",u.innerHTML='<i class="fas fa-spinner fa-spin"></i>'}function h(){let t=[];return Object.keys(e.images).forEach(function(s){site=e.images[s].site,t.push(site)}),sitesList=[...new Set(t)],sitesList}let p=L(1);function L(e){let t={},s=h();for(let n=0;n<s.length;n++)t[s[n]]=e;return t}let E=document.getElementsByClassName("flex");document.getElementById("show__all").addEventListener("click",function(){p=L(0);let e=h();for(let t=0;t<e.length;t++)v(e[t]),b(e[t])}),document.getElementById("show__all").addEventListener("click",a.bind(this,E));var v=function(e){let t=document.getElementById(e);0==p[e]?(p[e]=1,t.classList.add("gallery__filters--selected")):(p[e]=0,t.classList.remove("gallery__filters--selected"))},b=function(e){[].forEach.call(t,function(t){t.querySelector("img").dataset.site==e&&(1==p[e]?(t.classList.add("flex"),t.classList.remove("hidden2")):(t.classList.add("hidden2"),t.classList.remove("flex")))})};!function(){let e,t=document.getElementById("gallery__filters"),s=h(),l=document.getElementsByClassName("flex");Object.keys(s).forEach(function(i){e=s[i];let d=document.createElement("li");d.setAttribute("id",e),d.classList.add("gallery__filters--selected"),d.addEventListener("click",v.bind(this,e)),d.addEventListener("click",b.bind(this,e)),d.addEventListener("click",a.bind(this,l)),n.addEventListener("click",b.bind(this,e)),d.innerHTML=e,t.appendChild(d)})}()},request.send();